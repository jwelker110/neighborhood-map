<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/style.css">
    <title>Neighborhood Map</title>
</head>
<body>
<div id="map"></div>
<div class="alert-container" data-bind="foreach: alerts">
    <div class="alert" data-bind="css: type">
        <span data-bind="text: msg"></span>
    </div>
</div>
<div id="places-container">
    <div id="list-filter-container">
        <form data-bind="event: {submit: searchSubmit}">
            <input id="list-filter-input"
                   data-bind="textInput: filter, event: {input: filterLocations}, attr: {placeholder: searchAction() == 'filter' ? 'Filter results...' : 'Search e.g. Food near Baton Rouge...'}"
                   type="text"
                   tabindex="1"
                   autofocus
                   autocomplete="off">
        </form>
    </div>
    <div id="list-filter-controls">
        <div class="btn-group list-control-group">
            <button class="btn btn-default list-control"
                    tabindex="2"
                    data-bind="click: setAction.bind($data, 'filter'), css: {selected: searchAction() == 'filter'}">Filter</button>
            <button class="btn btn-default list-control"
                    tabindex="3"
                    data-bind="click: setAction.bind($data, 'search'), css: {selected: searchAction() == 'search'}">Search</button>
        </div>
    </div>
    <div id="list-container" data-bind="css: isCollapsedComputed">
        <div id="list-places" data-bind="foreach: filteredLocations().sort(function(a, b) {return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : a.name.toLowerCase() > b.name.toLowerCase() ? 1 : 0;})">
            <div class="list-place" data-bind="click: $parent.setCurrentLocation">
                <h4><span class="list-place-name" data-bind="text: name"></span> <small class="list-place-category" data-bind="text: categories && categories.length > 0 ? categories[0].shortName : ''"></small></h4>
                <div class="list-place-verified">This location<strong data-bind="text: verified ? ' has ' : ' has not '"></strong>been verified</div>
            </div>
        </div>
    </div>
    <div class="list-pulldown-container" data-bind="click: toggleListCollapsed">
        <div class="list-pulldown"><span class="glyphicon" data-bind="css: listPulldownComputed"></span></div>
        <div class="list-pulldown-border"></div>
    </div>
</div>
<div id="attribution-foursquare"><img id="attribution-foursquare-img" src="static/img/Powered-by-Foursquare-black-300.png"></div>
</body>
<footer>
    <script src="built/init.js"></script>
    <script src="built/googlemap.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZJz-OC0HG2ogLZ1uP_51QJiKkHh2ap0g&callback=initMap&libraries=places"
    type="text/javascript"></script>
    <script data-main="built/main" src="externals/require.js"></script>
    <script src="built/require-config.js"></script>
</footer>
</html>